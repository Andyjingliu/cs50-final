{% extends "base.html" %} 
{% block content %}

<div class="container">
  <h1>Admin Dashboard</h1>
  <p class="link-quiet">
    <a href="{{ url_for('homepage') }}">← Back to site</a>
  </p> 
  <section class="admin-actions">
    <h2>Quick Actions</h2>

    <div class="admin-actions-grid">
      <a href="{{ url_for('admin_homepage') }}" class="btn">Edit homepage content</a>

      <a href="{{ url_for('new_article') }}" class="btn">Write new article</a>

      <a href="{{ url_for('articles') }}" class="btn">View all articles</a>

      <a href="{{ url_for('videos') }}" class="btn">View videos page</a>
    </div>
  </section>

  <section class="admin-section">
    <h2>Recent Articles</h2>
    <p class="admin-section-help">
      The 5 most recent articles. Click “Edit” to update content.
    </p>

    <table class="admin-table">
      <thead>
        <tr>
          <th>Title</th>
          <th>Created</th>
          <th colspan="2">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for a in articles %}
        <tr>
          <td>{{ a["title"] }}</td>
          <td>
            {% if a["created_at"] %} {{ a["created_at"] }} {% else %} — {% endif %}
          </td>

          <td class="admin-table-actions">
            <a href="{{ url_for('edit_article', article_id=a['id']) }}" class="link-quiet">Edit</a>
          </td>

          <td class="admin-table-actions">
            {% set safe_title = a['title'] | replace("'", "") %}

            <form
              method="POST"
              action="{{ url_for('delete_article', article_id=a['id']) }}"
              style="display: inline-block; margin-left: 10px"
              onsubmit="return confirm('Are you sure you want to delete the article: {{ safe_title }}? This cannot be undone.');"
            >
              <button type="submit" class="delete-link-button">Delete</button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="4">No articles yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>

  <section class="admin-section">
    <h2>Recent Videos</h2>
    <p class="admin-section-help">Latest videos currently shown on the site.</p>

    <ul class="admin-list">
      {% for v in videos %}
      <li>{{ v["title"] }}</li>
      {% else %}
      <li>No videos yet.</li>
      {% endfor %}
    </ul>
  </section>
</div>
{% endblock %}
